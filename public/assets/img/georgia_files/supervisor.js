function QueryString(d){var c={},e=d.indexOf("?");0<e&&(d=d.substring(e+1));var k=d.split(/\&/);for(d=0;d<k.length;d++){var f=k[d],b=f.indexOf("="),e=f.substring(0,b),f=window.unescape(f.substring(b+1));c[e]=f}this.parameters=function(){return k.length};this.get=function(a){return c[a]};this.has=function(a){return a in c};this.toString=function(){var a=[],b;for(b in c)a.push(b+"="+c[b]);return a.join("&")}}
"undefined"===typeof window.addEventListener&&(window.addEventListener=function(d,c){this.attachEvent("on"+d,c)});
function PostmessageSupervisor(d){var c=this;this.debug=document.referrer?-1<document.referrer.search("debug=1"):-1<window.location.toString().search("debug=1");(function(b){function a(h){this.rep=0;this.vid=h;this.ntile=parseInt(h.getAttribute("smtile"),10)||4;this.setup()}function d(h,a){var c={tiv:Math.round(1E3*h.currentTime),tivprct:a,vidid:h.id,rep:h.smvideo.rep};b.dispatchEvent("timeinvideo",c);b.dispatchEvent("videontile-"+a,c)}function c(a){a=a.target;var e=a.smvideo,g,l=e.ntiles,f=a.currentTime/
a.duration;if(!a.paused)for(g=l[1],f<g.ntile&&g.triggered&&e.reset(),e=0;e<l.length;++e)g=l[e],f>=g.ntile&&!g.triggered&&(g.triggered=!0,0===g.ntile&&(a.smvideo.rep++,b.dispatchEvent("videostarted",{vidid:a.id,rep:a.smvideo.rep})),g=Math.round(100*g.ntile),d(a,g))}function e(a){a=a.target;d(a,100);b.dispatchEvent("videoended",{vidid:a.id,rep:a.smvideo.rep})}a.prototype.setup=function(){var a;this.ntiles=[];for(a=0;a<=this.ntile;++a)this.ntiles.push({ntile:a/this.ntile,triggered:!1});this.vid.addEventListener("timeupdate",
c);this.vid.addEventListener("ended",e);this.reset()};a.prototype.reset=function(){for(var a=0;a<this.ntiles.length;++a)this.ntiles[a].triggered=!1};a.prototype.destroy=function(){this.vid.removeEventListener("timeupdate",c)};b.trackVideo=function(b){b="string"===typeof b?document.getElementById(b):b;b.id?b.smvideo||(b.smvideo=new a(b)):console.log("Video without id ("+document.location+")")};b.untrackVideo=function(a){a="string"===typeof a?document.getElementById(a):a;a.smvideo.destroy();delete a.smvideo}})(c);
"undefined"===typeof d&&(d="*");this.send=function(b,a){"object"!==typeof a&&(a={});a.type=b;window.parent.postMessage(JSON.stringify(a),d)};this.configure=function(b,a){this.send("configure",{"snap-in":b,"snap-out":a})};var e={};this.addEventListener=function(b,a,d){var c=b+":"+a,c=e[c]=e[c]||[];0===c.length&&this.send("listen",{publisher:b,event:a});c.push(d)};this.removeEventListener=function(b,a,c){b=e[b+":"+a]||[];for(a=0;a<b.length;a++)if(c===b[a]){do a===b.length?b.pop():b[a]=b[a+1];while(a++<
b.length);return!0}return!1};var k={event:function(b){for(var a=b.publisher+":"+b.event,a=e[a]=e[a]||[],c=0;c<a.length;c++)a[c](b)}};this.dispatchEvent=function(b,a){"undefined"===typeof a&&(a={});a.event=b;this.send("event",a)};this.openURL=function(b){this.send("open",{url:b})};window.addEventListener("message",function(b){var a=null,c;try{if(a="string"===typeof b.data?JSON.parse(b.data):b.data,c=k[a.type],"function"===typeof c)c(a);else throw Error("Illegal state "+a.type+": handler not a function");
}catch(d){this.debug&&(console&&console.log)&&(d.message&&"Illegal state"===d.message.substring(0,13)?console.log("supervisor: "+d.message):console.log("supervisor: Bad message - '"+b.data+"'"))}});var f=function(){c.dispatchEvent("loaded")};"complete"===document.readyState?f():window.addEventListener("load",f);window.addEventListener("click",function(){c.dispatchEvent("userclicked")},!0)}
(function(d){var c=new QueryString(d.location.toString()),e=null,e=c.has("domain")?c.get("domain"):"*";d.supervisor=new PostmessageSupervisor(e)})(window);
/* Wed Feb 05 2014 18:49:58 GMT-0800 (PST) ac07e52219d8fdbe */